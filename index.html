<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ParkHere 🅿️</title>

  <!-- App Title for iOS -->
  <meta name="apple-mobile-web-app-title" content="ParkHere">

  <!-- Favicon -->
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" href="logo.png">

  <!-- Manifest -->
  <link rel="manifest" href="manifest.json" />

  <!-- Styles -->
  <link rel="stylesheet" href="style.css" />

  <!-- Content Security Policy (CSP) -->
  <meta http-equiv="Content-Security-Policy" content="
    default-src 'self' https://analytics.google.com https://www.googletagmanager.com;
    script-src 'self' https://cdnjs.cloudflare.com https://www.google.com/maps/ https://www.googletagmanager.com https://analytics.google.com;
    script-src-elem 'self' https://cdnjs.cloudflare.com https://www.google.com/maps/ https://www.googletagmanager.com https://analytics.google.com;
    style-src 'self' 'unsafe-inline';
    img-src * data:;
    frame-src 'self' https://www.google.com;
    object-src 'none';
    base-uri 'self';
    connect-src 'self' https://analytics.google.com https://www.google-analytics.com;
  ">

  <!-- Google Analytics 4 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-WFEPX8LJMT"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-WFEPX8LJMT');
  </script>
</head>
<body>
  <div class="container">
    <h1>ParkHere</h1>
    <p>Remember where you parked — no install needed.</p>

    <!-- Photo Upload Section -->
    <p class="shared-hide">📸 Add a photo:</p>
    <input 
      type="file" 
      id="photoInput" 
      class="shared-hide" 
      accept="image/*" 
      capture="environment"
      aria-label="Upload a photo of your parking spot"
    >
    <div id="photoPreview" class="shared-hide" style="margin:10px 0;">
      <img id="photoImg" src="" width="100%" style="border-radius:8px;" alt="Preview of your parking spot photo">
    </div>

    <!-- Buttons -->
    <button id="themeToggle" class="shared-hide">🌙 Dark Mode</button>
    <button id="saveBtn" class="shared-hide">📍 Save My Parking Spot</button>
    <button id="findBtn" disabled class="shared-hide">🧭 Find My Car</button>
    <button id="shareBtn" disabled class="shared-hide">📤 Share My Spot</button>
    <button id="showQRBtn" disabled class="shared-hide">🔲 Show QR Code</button>
    <div id="qrContainer" style="display:none;">
      <div id="qrcode-wrapper">
        <div id="qrcode"></div>
      </div>
      <p style="font-size:0.9em; color:#666;">Scan to view parking location</p>
    </div>
    <button id="directionsBtn" disabled class="shared-hide">🗺️ Get Directions</button>
    <button id="testVoiceBtn" class="shared-hide">🔊 Test Voice</button>
    <label for="voiceSelect" class="shared-hide">🗣️ Voice:</label>
    <select id="voiceSelect" class="shared-hide"></select>
    <label for="whatsappNumber" class="shared-hide">📱 WhatsApp Number:</label>
    <input type="tel" id="whatsappNumber" class="shared-hide" placeholder="+1234567890" />
    <button id="sendWABtn" disabled class="shared-hide">💬 Save Reminder in WhatsApp</button>
    <button id="resetBtn" class="shared-hide">🗑️ Reset Parking Spot</button>
    <button id="supportBtn" class="shared-hide">☕ Support This App</button>
    <p class="hint">ℹ️ ParkHere v1.0 by Jason | <a href="https://buymeacoffee.com/digitalchaos" target="_blank" style="color:#ff8f00;">Support development</a></p>

    <!-- Status & Timer -->
    <div id="status"></div>
    <div id="timer"></div>
    <div id="map"></div>
  </div>

  <!-- Load QRCode.js first -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

  <!-- Then load your app -->
  <script src="app.js"></script>
</body>
</html>
